{
    "ConnectionStrings": {
        "Todo": "<DO_NOT_STORE_SENSITIVE_DATA_HERE>"
    },
    "MigrateDatabase": false,
    "AllowedHosts": "*",
    "GenerateJwt": {
        "Issuer": "https://auth.todo-by-satrapu.com",
        "Audience": "https://api.todo-by-satrapu.com",
        "Secret": "<DO_NOT_STORE_SENSITIVE_DATA_HERE>"
    },
    "ApplicationFlows": {
        "TransactionOptions": {
            "IsolationLevel": "ReadCommitted",
            "Timeout": "0.00:00:05.000"
        }
    },
    "Logging": {
        "LogLevel": {
            // @satrapu March 6th, 2022: Configure logging to limit the events sent to Jaeger.
            "Default": "Information",
            "Microsoft": "Warning",
            "Microsoft.Hosting.Lifetime": "Information",
            "Microsoft.EntityFrameworkCore.Database.Command": "Information",
            "System": "Warning"
        }
    },
    "Serilog": {
        "LevelSwitches": {
            "$controlSwitch": "Information"
        },
        "MinimumLevel": {
            "ControlledBy": "$controlSwitch",
            "Override": {
                "Microsoft": "Warning",
                "Microsoft.EntityFrameworkCore.Database.Command": "Information",
                "System": "Warning"
            }
        },
        "Using": [
            "Serilog.Sinks.File"
        ],
        "WriteTo": [
            {
                "Name": "File",
                "Args": {
                    "path": "%LOGS_HOME%/todo-web-api.log",
                    "outputTemplate": "{Timestamp:HH:mm:ss.fff} {Level:u3} | trid: {TraceId} sid: {SpanId} pid: {ParentId} cid:{ConversationId} fid:{ApplicationFlowName} thid:{ThreadId} | {SourceContext}{NewLine}{Message:lj}{NewLine}{Properties}{NewLine}{Exception}",
                    "rollingInterval": "Day",
                    "rollOnFileSizeLimit": "true",
                    "fileSizeLimitBytes": "1073741824",
                    "retainedFileCountLimit": "31"
                }
            }
        ],
        "Enrich": [
            "FromLogContext",
            "WithSpan",
            "WithThreadId"
        ],
        "Properties": {
            "Application": "Todo.WebApi",
            "ApplicationFlowName": "N/A",
            "ConversationId": "N/A",
            "ParentId": "N/A",
            "ThreadId": "N/A",
            "TraceId": "N/A",
            "SpanId": "N/A"
        },
        "Destructure": [
            {
                "Name": "With",
                "Args": {
                    "policy": "Todo.Logging.Serilog.Destructuring.DeleteTodoItemInfoDestructuringPolicy, Todo.Logging"
                }
            },
            {
                "Name": "With",
                "Args": {
                    "policy": "Todo.Logging.Serilog.Destructuring.NewTodoItemInfoDestructuringPolicy, Todo.Logging"
                }
            },
            {
                "Name": "With",
                "Args": {
                    "policy": "Todo.Logging.Serilog.Destructuring.TodoItemQueryDestructuringPolicy, Todo.Logging"
                }
            },
            {
                "Name": "With",
                "Args": {
                    "policy": "Todo.Logging.Serilog.Destructuring.UpdateTodoItemInfoDestructuringPolicy, Todo.Logging"
                }
            }
        ]
    },
    "ExceptionHandling": {
        "IncludeDetails": false
    },
    "HttpLogging": {
        "Enabled": false
    },
    "ConfigurationDebugViewEndpointEnabled": false,
    "OpenTelemetry": {
        "Enabled": true,
        "AttachLogsToActivity": true,
        "IncludeScopes": true,
        "IncludeFormattedMessage": true,
        "ParseStateValues": true,
        "Instrumentation": {
            "EntityFrameworkCore": {
                "SetDbStatementForText": true
            }
        },
        "Exporters": {
            "Jaeger": {
                "AgentHost": "<ADD_YOUR_JAEGER_HOST_NAME_HERE>",
                "AgentPort": 0
            }
        }
    }
}
